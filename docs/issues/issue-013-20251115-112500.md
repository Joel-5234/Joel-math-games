# Issue #013: Distractors Too Complex for 8th Grade

**Date:** 2025-11-15T11:25:00  
**Status:** Fixed  
**Priority:** High

## Description
Multiple choice distractors (wrong answers) were generating overly complex values that are not appropriate for 8th grade students. For example, slopes like `-27/10` or other complex fractions were appearing as options, making the questions unnecessarily difficult.

## User Feedback
> "the answers are way too unnecessary, make them easier for the 8th grade mind to understand. for example the image above has -27/10 which is (in my opinion) too much"

## Root Cause Analysis
1. **`generateSlopeDistractors()`**: Using `randomFloat()` and reciprocals (`1/correctSlope`) without constraints
2. **Complex Reciprocals**: Calculating `1/correctSlope` for any slope resulted in complex fractions (e.g., if slope = -10/27, reciprocal = -27/10)
3. **Random Variations**: Using `randomFloat(-1, 1)` created messy decimal values
4. **No Constraints**: No limits on denominator size or value complexity

## Solution (Enhanced)
Simplified distractor generation to focus on **common student mistakes** with **simple, age-appropriate values**:

1. **Strict Value Whitelist**: ONLY use values from a predefined list of simple values (0, ±1, ±2, ±3, 1/2, 1/3, 2/3, 3/2, etc.)
2. **No Arithmetic on Slopes**: Completely removed arithmetic operations (correctSlope + 1, etc.) which could create complex fractions
3. **Common Mistakes** (only if result is in whitelist):
   - Wrong sign (most common: multiply by -1) - ONLY if result is in simpleValues
   - Flipped fraction (reciprocal) - ONLY if result is in simpleValues
4. **Fallback to Simple Values**: If not enough pedagogical mistakes, fill with random simple values from whitelist
5. **Simple Equation Distractors**: For parallel/perpendicular lines, use simple integer offsets

**Critical Fix (2025-11-15 11:35)**: Enhanced to use strict whitelist checking. Previous version still allowed complex fractions like `-20/23` because it did arithmetic on slopes. Now ONLY uses values from `simpleValues` array.

## Changes Made
- **app.js**:
  - Completely rewrote `generateSlopeDistractors()` (enhanced 2025-11-15 11:35):
    * Added `simpleValues` whitelist array of ONLY age-appropriate values
    * **REMOVED all arithmetic operations** (correctSlope + 1, correctSlope - 1, etc.)
    * Wrong sign ONLY if `-correctSlope` is in simpleValues whitelist
    * Reciprocal ONLY if `1/correctSlope` is in simpleValues whitelist
    * Fall back to selecting from simpleValues array directly
    * **Guarantees NO complex fractions** like -20/23, 13/7, etc.
  - Simplified `generateEquationDistractors()`:
    * Use simple integer offsets (1, -1, 2, -2, 3) instead of random floats
    * Remove `randomFloat()` usage
    * Use deterministic mistake patterns

## Testing
- [x] Build completed successfully
- [x] No linter errors
- [x] Distractors now use simple, 8th-grade-appropriate values
- [x] Complex fractions like -27/10 eliminated
- [x] Focus on pedagogically sound mistakes

## Impact
- Improves age-appropriateness of questions
- Focuses on common student misconceptions (wrong sign, off-by-one errors)
- Reduces cognitive load, allowing students to focus on concepts, not complex arithmetic
- Better educational experience for 8th graders

## Examples of Improvements

**Before:**
- Slope options: `2/3`, `-27/10`, `1.47`, `undefined`

**After (Initial Fix):**
- Slope options: `2/3`, `-2/3`, `3/2`, `1`

**Issue Found (2025-11-15 11:35):**
- Complex fractions like `-20/23` still appearing
- Root cause: Arithmetic on slopes (e.g., `correctSlope + 1`) created complex results

**After (Enhanced Fix):**
- Slope options: `2/3`, `-2/3`, `3/2`, `1` (ONLY from whitelist)
- **NO** complex fractions possible
- All distractors from predefined simple values

**Before:**
- Parallel line equations with complex slopes and intercepts

**After:**
- Parallel line equations with simple integer offsets


