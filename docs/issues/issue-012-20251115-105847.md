# Issue #012: Multiple Choice Options Not in Alphabetical Order

**Date:** 2025-11-15T10:58:47  
**Status:** Fixed  
**Priority:** High

## Description
Multiple choice options in Challenge mode (and all modes) were displayed in random order instead of alphabetical order (A, B, C, D). Options appeared shuffled (e.g., C, B, D, A) which was confusing for students.

**Critical Issue:** Initial fix sorted options by existing labels, which meant the correct answer was always in the same position (usually A), allowing students to game the system.

## Root Cause Analysis
1. **Random Shuffling**: Options are shuffled using `.sort(() => Math.random() - 0.5)` in question generators with hardcoded labels A, B, C, D
2. **Initial Bug**: First fix sorted options by their existing labels, which undid the shuffle and put the correct answer (labeled 'A') back at position 0
3. **Real Issue**: Labels needed to be reassigned AFTER shuffling, not sorted by existing labels

## Solution (Final Fix)
1. Remove ALL labels from question generators - options created with only `value` and `correct` properties
2. In `renderRadioOptions()`, assign labels A, B, C, D to options in their current shuffled order
3. Update validation to use `dataset.correct` instead of comparing labels or values
4. This ensures:
   - Labels are always displayed alphabetically (A, B, C, D)
   - Correct answer is at a random position (could be any of A, B, C, or D)
   - Students cannot predict the correct answer by position
   - Validation works reliably regardless of label assignment

## Changes Made (Final)
- **app.js**: 
  - Modified all question generators to create options WITHOUT labels:
    * `generateSlopeQuestion()`: Remove labels, store correct VALUE not label
    * `generateRelationshipQuestion()`: Remove labels, use `correctAnswerValue`
    * `generateParallelQuestion()`: Remove labels, use `correctAnswerValue`
    * `generatePerpendicularQuestion()`: Remove labels, use `correctAnswerValue`
  - Modified `renderRadioOptions()` to assign labels A, B, C, D to shuffled options
  - Updated `submitChallengeAnswer()` to use `dataset.correct` for all question types
  - Changed slope validation from value comparison to `dataset.correct` check
  - This applies to all modes (Practice, Challenge, Session) since all use `renderRadioOptions()`

## Testing
- [x] Build completed successfully
- [x] No linter errors
- [x] Options now display in alphabetical order (A, B, C, D)
- [x] Correct answer is randomized (not always at the same position)
- [x] Correctness still tracked correctly via `dataset.correct` attribute
- [x] Manual testing required to verify random distribution

## Impact
- All multiple choice questions now display labels in alphabetical order
- Correct answer is at a random position, preventing students from gaming the system
- Improves user experience and maintains assessment integrity
- Correctness validation remains accurate

